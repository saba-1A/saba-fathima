<div class="v1-mobile-grid">
  {% for i in (1..6) %}
    {% capture prod_id %}prod_{{ i }}{% endcapture %}
    {% capture mob_img_id %}mob_img_{{ i }}{% endcapture %}
    
    {% assign product = all_products[section.settings[prod_id]] %}
    {% assign custom_img = section.settings[mob_img_id] %}
    
    <div class="v1-mobile-item">
      {% if product != blank %}
        
        <!-- LOGIC: Use Custom Mobile Image if exists, else use Product Image -->
        {% if custom_img != blank %}
          <img src="{{ custom_img | image_url: width: 600 }}" alt="{{ product.title }}">
        {% else %}
          <img src="{{ product.featured_image | image_url: width: 600 }}" alt="{{ product.title }}">
        {% endif %}
        
        <!-- Button trigger for Popup (Needs Product Data) -->
        <button class="v1-mobile-plus js-open-popup" 
                data-product-json="{{ product | json | escape }}">
          +
        </button>

      {% else %}
        <!-- Placeholder if no product selected -->
        {{ 'product-1' | placeholder_svg_tag }}
      {% endif %}
    </div>
  {% endfor %}
</div>

<style>
  .v1-mobile-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); 
    width: 342px; 
    margin: 0 auto;
    gap: 4px; 
  }
  
  .v1-mobile-item {
    position: relative;
    width: 169px;      
    height: 186.42px;  
    overflow: hidden;
  }
  
  .v1-mobile-item img { 
    width: 100%; 
    height: 100%; 
    object-fit: cover; 
    display: block;
  }
  
  .v1-mobile-plus {
    position: absolute;
    top: 10px; right: 10px;
    background: #fff;
    width: 24px; height: 24px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 16px; font-weight: 400; color: #000;
    cursor: pointer; border: none; padding: 0; line-height: 1;
    z-index: 2;
  }
</style>